<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Lesson 1</title>
</head>

<body>
<h2 align="center"><strong>Куда поедем отдыхать?</strong><br>
</h2>
<p><span style="text-align: left">Исходные данные для выполнения задания:</span></p>
<ul>
  <li>  Растр с осреднёнными значениями яркостной  температуры, полученные сенсором MODIS, за период 2000-2013<em>:  </em><strong><em>Temp.</em></strong><strong><em>tif</em></strong></li>
  <li>Растр с осреднёнными значениями осадков,  полученные &lt;…&gt;<em>:&nbsp; </em><strong><em>PCP.</em></strong><strong><em>tif</em></strong></li>
  <li>Вектор государственных границ: <strong><em>boundary.shp </em></strong></li>
</ul>
<p align="center"><strong>Работа в QGIS</strong></p>
<p>Запускаем программу QGIS (версия 2.18.x). </p>
<p>Из рабочей папки по очереди, либо  все вместе (выбираем нужные нам файлы через зажатую клавишу <strong>ctrl</strong>)  перетаскиваем мышкой файлы <em>temp.tif</em>, <em>PCP.tif, </em><em>boundary.</em><em>shp</em> в <strong>Панель слоёв</strong> (<strong>Layers </strong><strong>Panel</strong>) программы QGIS.</p>
<p><img src="../Pictures/Lesson_1/pict1-2_lesson1.png" width="945" height="541" alt=""/></p>
<p>Слои появятся на панели в произвольном порядке, а в <strong>Области карты</strong> будет отображаться первый  слой. В нашем случае это  слой <em>Temp</em>. </p>
<p><img src="../Pictures/Lesson_1/pict3_lesson1_945x504.png" alt="" width="945" height="504" align="middle"/></p>
<p>Поменяем порядок слоёв. Для этого выделяем слой в панели  слоёв и перетаскиваем его вверх или вниз, удерживая левую кнопку мыши. В итоге  слои должны идти в следующем порядке:</p>
<ul>
  <li>boundary</li>
  <li>PCP</li>
  <li>Temp</li>
</ul>
<p>Для  удобства, на время работы со слоем <em>PCP</em>, деактивируем слой <em>Temp</em>, убрав кликом крестик, расположенный слева от него.</p>
<p><img src="../Pictures/Lesson_1/pict4-5_lesson1.png" alt="" width="512" height="190" align="absmiddle"/></p>
<p>Сейчас растры отображаются в чёрно-белой палитре.  Для их корректного отображения нам необходимо  выполнить некоторые настройки.</p>
<p>Для этого правой кнопкой мыши нажмите на растр <em>PCP</em> в панели меню. Из появившегося списка выберите <strong>Свойства</strong>. Появится следующий диалог: </p>
<p><img src="../Pictures/Lesson_1/pict6_lesson1.png" width="700" height="549" alt=""/></p>
<p>С левой стороны вы можете видеть вкладки, а справа – набор  настроек, соответствующие им. Перейдите на вкладку <strong>Стиль</strong>. В группе настроек <strong><em>Визуализация</em></strong> обратите внимание на максимальное и минимальное значение растра. Минимальному  значению соответствует значение <em>-9999</em>.  Растр <em>PCP </em>должен отображать информацию о количестве осадков.  Очевидно, что значения <em>-9999</em> и любого  другого отрицательного значения быть не может. Это служебное значение, оно  указывает на отсутствие данных на данной территории (в данном пикселе).  Исключим это значение из визуализации.</p>
<p>Перейдите на вкладку <strong>Прозрачность</strong> (1). В группе параметров <strong>Значение  «нет данных» </strong>в поле <strong>Дополнительное  значение</strong> введите <em>-9999</em> (2). Нажмите <strong>Применить</strong> (3) или <strong>OK </strong>(в  этом случая диалог автоматически закроется). </p>
<p><img src="../Pictures/Lesson_1/pict7_lesson1.png" width="700" height="413" alt=""/></p>
<p>Теперь зададим легенду (палитру) для нашего растра.</p>
<p>Перейдите на вкладку <strong>Стиль </strong>(1). В  группе настроек <strong><em>Визуализация</em></strong> выберите  тип изображения <em>Одноканальное  псевдоцветное</em> (2).  В группе настроек<strong> <em>Значение мин/макс</em></strong> из выпадающего списка выберите любую  цветовую палитру (3). Внизу в  пустом окне отобразится созданная легенда карты (4). Нажмите <strong>Применить</strong> (5). Нажмите <strong>ОК </strong>(6).  </p>
<p><img src="../Pictures/Lesson_1/pict8_lesson1.png" width="700" height="533" alt=""/></p>
<p>Видим, что в окне карты появились заметные изменения.</p>
<p><img src="../Pictures/Lesson_1/pict9_lesson1.png" width="945" height="504" alt=""/></p>
<p>Деактивируйте слой осадков <em>PCP</em> и  активируйте слой температур <em>Temp. </em> Настройте отображение растра температур аналогично тому, как  мы это сделали для растра осадков. Обратите внимание, что для слоя температур вы должны исключить значение -999.</p>
<p>Оцените полученный результат. </p>
<p><img src="../Pictures/Lesson_1/pict10_lesson1.png" width="945" height="504" alt=""/></p>
<p>Откройте панель инструментов <strong>Панель атрибутов</strong> и найдите  инструмент <strong>Определить объекты </strong><img src="../Pictures/Lesson_1/pict11_lesson1.png" width="30" height="31" alt=""/>. Активируйте  его, нажав на иконку (1). Слой, значения которого вы хотите просматривать, должен быть выделен на пенели слоёв.</p>
<p>Курсор превратится в чёрную стрелку с буквой &ldquo;i&rdquo;, а справа от области карты  появится диалог <strong>Результат определения. </strong>В  левом нижнем углу появившегося диалога выберете из выпадающего списка режим  отображения <em>Таблица</em> (2)<strong>. </strong>Наведитесь на любую точку на карте и  кликнете в неё левой кнопкой мыши (3). В таблице диалога <strong>Результат определения </strong>отобразится значение точки, выбранной на  карте (4).</p>
<p><img src="../Pictures/Lesson_1/pict12_lesson1.png" width="945" height="504" alt=""/></p>
<p>Для того, чтобы посмотреть на значения слоя осадков,  выделите на панели слоёв  <em>PCP</em>,  причем включать видимость слоя совсем необязательно. <br>
</p>
<p>Наши растры  готовы для дальнейшей работы. </p>
<p> Выберем диапазон условий, который подходит для нашего  отдыха. Например, найдём те места на Земле, которые удовлетворяют условию:  температура должна лежать в диапазоне [22-30] градусов Цельсия, а осадки в диапазоне  [0-30] мм. Причем оба условия должны соблюдаться одновременно. </p>
<p>  Для начала выделим для каждого слоя обозначенные диапазоны.</p>
<p>Воспользуемся инструментом анализа <strong>Reclassify Values (simple)</strong>. Данный инструмент не является родным для QGIS, он принадлежит другой открытой ГИС – SAGA GIS. Тем не менее, интерфейс QGIS позволяет работать с внешними инструментами, изначально ему не принадлежащими.</p>
<p>Через панель меню <strong>Анализ данных</strong> выберите пункт <strong>Панель инструментов</strong>. Справа от области карты появится диалог <strong>Панель инструментов</strong>, в котором будет представлен список всех доступных внутренних и внешних функций. В верхней части диалога в строке поиска наберите <em>Reclassify Values (simple)</em>. </p>
<p><img src="../Pictures/Lesson_1/pict13-14_lesson1.png" width="660" height="196" alt=""/></p>
<p>Дважды кликните по результату выборки левой кнопкой мыши. Перед вами появится диалог <strong>Reclassify Values (simple)</strong>. В качестве входного параметра <em><strong>Grid</strong></em> из выпадающего списка выберите  слой <em>Temp </em>(1).  Для пункта <em><strong>Replace Condition</strong></em> выберите третье условие: <em>[2] low value &lt;= grid value &lt;= high value</em> (2). Задайте путь и название выходного растра в поле <em>Changed Grid </em>(3)<em>.</em> Напротив поля для параметра Lookup Table нажмите кнопку <img src="../Pictures/Lesson_1/pict15_lesson1.png" width="20" height="17" alt=""/> (4). </p>
<p><img src="../Pictures/Lesson_1/pict17_lesson1.png" width="740" height="374" alt=""/></p>
<p>Появится диалог <strong>Фиксированная таблица</strong>, который предназначен для задания диапазона значений, который бы удовлетворял условию: <em>22 &lt;= Temp value &lt; 30.</em></p>
<p>Заполните таблицу следующим образом и нажмите <strong>OK</strong>:</p>
<p><img src="../Pictures/Lesson_1/pict16_lesson1.png" width="471" height="348" alt=""/></p>
<p>Для запуска инчтрумента в диалоге <strong>Reclassify Values (simple)</strong> нажмите <strong>Run</strong> (5). Дождитесь окончания процесса. На панели слоёв появится новый растр температур <em>Changed Grid</em>, значения которого лежать в диапазоне [22;30). Измените название растра на <em>Temp_new</em>: для этого правой кнопкой мыши нажмите по слою и выберети пункт <strong><em>Переименовать</em></strong>.</p>
<p><img src="../Pictures/Lesson_1/pict18_lesson1.png" width="945" height="405" alt=""/></p>
<p>Повторите те же действия для слоя осадков <em>PCP</em>. Значения нового растра должны удовлетворять условию <em>0 &lt;= PCP value &lt; 30</em>. <strong>Фиксированная таблица</strong> должна быть заполнена по следющему образцу:</p>
<p><img src="../Pictures/Lesson_1/pict19_lesson1.png" width="455" height="249" alt=""/></p>
<p>Переименуйте полученный растр <em>Changed Grid</em> в <em>PCP_new</em>.</p>
<p>Наконец, выделим те территории на Земле, которые будут  удовлетворять обоим условиям, то есть температура будет лежать в диапазоне  [22-33], а осадки [0-30].</p>
<p>Для выполнения этой задачи воспользуемся растровым калькулятором. <strong>Калькулятор растров</strong> доступен через пункт меню <strong>Растр</strong>. В одноименном диалоге в списке <em><strong>Каналы растров</strong></em><strong></strong> находятся все доступные параметры, которые мы можем использовать для вычислений. В области <strong><em>Выражение</em></strong> отображается формула, по которой будут производиться вычисления. Составьте следующее выражение, пользуясь параметрами из списка (двойной клик по слою) и кнопками операторов: <em>&quot;Temp_new@1&quot; *  &quot;PCP_new@1&quot;</em> (1-3). В поле <strong><em>Слой результатов</em></strong> укажите путь и название выходного растра (4). Нажмите <strong>ОК </strong>(5). Результат появится на панели слоёв.</p>
<p><img src="../Pictures/Lesson_1/pict20_lesson1.png" width="745" height="544" alt=""/></p>
<p>Настроим отображение конечного результата.</p>
<p>Отключите все слои, кроме <em>best_place</em> и <em>boundary</em>. В свойствах слоя <em>best_place</em>, на вкладке <strong><em>Прозрачность</em></strong> укажите дополнительное значение &quot;нет данных&quot;, равное 0.</p>
<p><img src="../Pictures/Lesson_1/pict21_lesson1.png" width="347" height="94" alt=""/></p>
<p>Перейдите  на вкладку  <strong>Стиль</strong>. В  группе настроек <strong><em>Визуализация</em></strong> выберите  тип изображения <strong><em>Одноканальное  псевдоцветное </em></strong>(1).  В группе настроек <em><strong>Значения мин/макс </strong></em>под таблицей легенды нажмите  на зелёный плюсик <img src="../Pictures/Lesson_1/pict22_lesson1.png" width="25" height="22" alt=""/> (<em>Добавить значение вручную</em>) (2). В таблице легенды  появится новый класс. Поменяйте значение класса на 1 (3). Вы  можете также поменять цвет класса, дважды кликнув на соответстующее поле (4). Нажмите <strong>ОК</strong> (5).</p>
<p><img src="../Pictures/Lesson_1/pict23_lesson1.png" width="700" height="472" alt=""/></p>
<p>Оцените полученный результат. </p>
<p><img src="../Pictures/Lesson_1/pict24_lesson1.png" width="783" height="396" alt=""/></p>
<p>В какие страны вы отправитесь отдыхать?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
